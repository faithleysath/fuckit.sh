import * from "../utils/system.ab"

main {
    echo "Available Package Managers:"
    let managers = get_package_managers()
    for manager in managers {
        echo "  - {manager}"
    }

    echo "\nAvailable Shell Profiles:"
    let profiles = get_shell_profiles()
    for profile in profiles {
        echo "  - {profile}"
    }

    echo "\nOperating System Info:"
    echo "{trust get_os_info()}"

    echo "\nCurrent Working Path:"
    echo "{get_current_path()}"

    echo "\nAvailable Python Versions:"
    let pythons = get_python_info()
    if len(pythons) > 0 {
        for python in pythons {
            echo "  - {python}"
        }
    } else {
        echo "  No Python installation found."
    }

    echo "\nTesting Python Script Execution:"
    let python_script = "import sys\nprint(f'Hello from \{sys.version}')"
    let result = execute_python3_script(python_script) failed {
        echo "  Failed to execute Python script. Status: {status}"
        exit 1
    }
    echo "  - Output: {result}"

    echo "\nTesting Python Script Execution with Arguments:"
    let script_with_args = "import sys; print(sys.argv[1:])"
    let args = ["hello", "world with space"]
    let result_with_args = execute_python3_script(script_with_args, args) failed {
        echo "  Failed to execute Python script with args. Status: {status}"
        exit 1
    }
    echo "  - Args: {args}"
    echo "  - Output: {result_with_args}"

    echo "\nTesting Python Script Execution with Complex Arguments:"
    let complex_arg = "it's a \"test\" with back\\slash and $(pwd)*"
    let complex_args = [complex_arg]
    let result_complex_args = execute_python3_script(script_with_args, complex_args) failed {
        echo "  Failed to execute Python script with complex args. Status: {status}"
        exit 1
    }
    echo "  - Args: ['{complex_arg}']"
    echo "  - Output: {result_complex_args}"
}
